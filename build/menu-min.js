define("bui/menu",["bui/common","jquery/1.9.1/jquery"],function(e,n,t){var u=e("bui/common"),i=u.namespace("Menu");u.mix(i,{Menu:e("bui/menu/menu"),MenuItem:e("bui/menu/menuitem"),ContextMenu:e("bui/menu/contextmenu"),PopMenu:e("bui/menu/popmenu"),SideMenu:e("bui/menu/sidemenu")}),i.ContextMenuItem=i.ContextMenu.Item,t.exports=i}),define("bui/menu/menu",["bui/common","jquery/1.9.1/jquery"],function(e,n,t){var u=e("bui/common"),i=u.Component,a=i.UIBase,l=i.Controller.extend([a.ChildList],{bindUI:function(){var e=this;e.on("click",function(n){var t=n.target,u=e.get("multipleSelect");e!=t&&(u||!e.get("clickHide")||t.get("subMenu")||e.getTopAutoHideMenu().hide())}),e.on("afterOpenChange",function(n){var t=n.target,i=n.newVal,a=e.get("children");i&&u.each(a,function(e){e!==t&&e.get("open")&&e.set("open",!1)})}),e.on("afterVisibleChange",function(n){n.newVal,e.get("parentMenu");e._clearOpen()})},getTopAutoHideMenu:function(){var e=this,n=e.get("parentMenu");return n&&n.get("autoHide")?n.getTopAutoHideMenu():e.get("autoHide")?e:null},_clearOpen:function(){var e=this,n=e.get("children");u.each(n,function(e){e.set&&e.set("open",!1)})},findItemById:function(e){return this.findItemByField("id",e)},_uiSetSelectedItem:function(e){e&&_self.setSelected(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},isDecorateChild:{value:!0},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});t.exports=l}),define("bui/menu/menuitem",["jquery/1.9.1/jquery","bui/common"],function(e,n,t){var u=e("jquery/1.9.1/jquery"),i=e("bui/common"),a=i.Component,l=a.UIBase,s=(i.prefix,"x-caret"),o="data-id",c=a.View.extend([l.ListItemView,l.CollapsableView],{_uiSetOpen:function(e){var n=this,t=n.getStatusCls("open");e?n.get("el").addClass(t):n.get("el").removeClass(t)}},{ATTRS:{}},{xclass:"menu-item-view"}),r=a.Controller.extend([l.ListItem,l.Collapsable],{renderUI:function(){var e=this,n=e.get("el"),t=e.get("id");t||(t=i.guid("menu-item"),e.set("id",t)),n.attr(o,t)},handleMouseEnter:function(e){this.get("subMenu")&&this.get("openable")&&this.set("open",!0),r.superclass.handleMouseEnter.call(this,e)},handleMouseLeave:function(e){if(this.get("openable")){var n=this,t=n.get("subMenu"),u=e.toElement||e.relatedTarget;u&&t&&t.containsElement(u)?n.set("open",!0):n.set("open",!1)}r.superclass.handleMouseLeave.call(this,e)},containsElement:function(e){var n,t=this,u=r.superclass.containsElement.call(t,e);return u||(n=t.get("subMenu"),u=n&&n.containsElement(e)),u},_uiSetOpen:function(e){if(this.get("openable")){var n=this,t=n.get("subMenu"),u=n.get("subMenuAlign");if(t)if(e)u.node=n.get("el"),t.set("align",u),t.show();else{var i=t.get("align");i&&i.node!=n.get("el")||t.hide()}}},_uiSetSubMenu:function(e){if(e){var n=this,t=n.get("el"),i=n.get("parent");e.get("parentMenu")||(e.set("parentMenu",i),i.get("autoHide")&&("click"==i.get("autoHideType")?e.set("autoHide",!1):e.set("autoHideType","leave"))),u(n.get("arrowTpl")).appendTo(t)}},destructor:function(){var e=this,n=e.get("subMenu");n&&n.destroy()}},{ATTRS:{elTagName:{value:"li"},xview:{value:c},open:{view:!0,value:!1},openable:{value:!0},subMenu:{view:!0},subMenuAlign:{valueFn:function(){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+s+" "+s+'-left"></span>'},events:{value:{afterOpenChange:!0}},subMenuType:{value:"pop-menu"}},PARSER:{subMenu:function(e){var n,t=e.find("ul"),u=this.get("subMenuType");return t&&t.length&&(n=i.Component.create({srcNode:t,xclass:u}),"pop-menu"==u?(t.appendTo("body"),n.setInternal({autoHide:!0,autoHideType:"leave"})):this.get("children").push(n)),n}}},{xclass:"menu-item",priority:0}),m=r.extend({},{ATTRS:{focusable:{value:!1},selectable:{value:!1},handleMouseEvents:{value:!1}}},{xclass:"menu-item-sparator"});r.View=c,r.Separator=m,t.exports=r}),define("bui/menu/contextmenu",["bui/common","jquery/1.9.1/jquery"],function(e,n,t){var u=e("bui/common"),i=e("bui/menu/menuitem"),a=e("bui/menu/popmenu"),l=u.prefix,s=l+"menu-item-link",o=l+"menu-item-icon",c=u.Component,r=(c.UIBase,i.extend({bindUI:function(){var e=this;e.get("el").delegate("."+s,"click",function(e){e.preventDefault()})},_uiSetIconCls:function(e,n){var t=this,u=n.prevVal,i=t.get("el").find("."+o);i.removeClass(u),i.addClass(e)}},{ATTRS:{text:{veiw:!0,value:""},iconCls:{sync:!1,value:""},tpl:{value:'<a class="'+s+'" href="#">      <span class="'+o+' {iconCls}"></span><span class="'+l+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"})),m=a.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});m.Item=r,t.exports=m}),define("bui/menu/popmenu",["bui/common","jquery/1.9.1/jquery"],function(e,n,t){var u=e("bui/common"),i=u.Component.UIBase,a=e("bui/menu/menu"),l=u.Component.View.extend([i.PositionView],{}),s=a.extend([i.Position,i.Align,i.AutoShow,i.AutoHide],{},{ATTRS:{clickHide:{value:!0},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:!0},visible:{value:!1},xview:{value:l}}},{xclass:"pop-menu"});t.exports=s}),define("bui/menu/sidemenu",["jquery/1.9.1/jquery","bui/common"],function(e,n,t){var u=e("jquery/1.9.1/jquery"),i=e("bui/common"),a=e("bui/menu/menu"),l=(i.Component,i.prefix+"menu-title"),s="menu-leaf",o=a.extend({initializer:function(){var e=this,n=e.get("items"),t=e.get("children");i.each(n,function(n){var u=e._initMenuCfg(n);t.push(u)})},bindUI:function(){var e=this,n=e.get("children");i.each(n,function(e){var n=e.get("children")[0];n&&n.publish("click",{bubbles:1})}),e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("itemclick",function(n){var t=n.item,i=u(n.domTarget).closest("."+e.get("collapsedCls"));if(i.length){var a=t.get("collapsed");t.set("collapsed",!a)}else t.get("el").hasClass(s)&&(e.fire("menuclick",{item:t}),e.clearSelection(),e.setSelected(t))})},getItems:function(){var e=this,n=[],t=e.get("children");return i.each(t,function(e){var t=e.get("children")[0];n=n.concat(t.get("children"))}),n},_initMenuCfg:function(e){var n=this,t=e.items,u=[],a={selectable:!1,children:[{xclass:"menu",children:u}]};return i.mix(a,{xclass:"menu-item",elCls:"menu-second"},e),i.each(t,function(e){var t=n._initSubMenuCfg(e);u.push(t)}),a},_initSubMenuCfg:function(e){var n=this,t={xclass:"menu-item",elCls:"menu-leaf",tpl:n.get("subMenuItemTpl")};return i.mix(t,e)}},{ATTRS:{defaultChildCfg:{value:{subMenuType:"menu",openable:!1,arrowTpl:""}},autoInitItems:{value:!1},itemTpl:{value:'<div class="'+l+'"><s></s><span class="'+l+'-text">{text}</span></div>'},subMenuItemTpl:{value:'<a href="{href}"><em>{text}</em></a>'},collapsedCls:{value:l},events:{value:{menuclick:!1}}}},{xclass:"side-menu"});t.exports=o});